--7i7rririirrrrirrrrririrr7r7r7r7777v77rrrrrriririri7r77v77rrr7rrrrriiiiiiiiriiii:::............................:.:.:.::::::i:iiriri
--7:iiiiiiii:::::::::::::::::::iiriiirii:::::::::::::iirii:i::::::::::::.:::......                     . ... . . ..........:.:::::::
--vrv7vLYvL77rrrriiiiiririiiiiirrrrrrrrii::::iiiiiiiiii:i:iiiiiiiiiii:iii::::::::...................:.::::::::::::::::::i:iiiirrrr7i
--7r7vvv7v777rrriiirrrirrrrriiiiiiiiii:i::::::::::::::.::::::iiiiiii:i::::::::...:.................:.::::::::::::::::i:iiiiiirirr77r
--r:r77rrrririi:iirirrrrrrrrriiii::::::::.:.:.:::::::.:.:.:.::::::i::::::::::::::.:...............:.::::::::::::::i:iiiiiirrrrrr777r
--r:irrrii:i:i:::i:iiiiriiii:i::::::::::::.....:.:.:::.:.:.:.:.:::::::::::.:.:::.:...............:::.::::::::i:::iiiiiirirrrrrr77v77
--7i7rrrrii:::::::::::::::::::....:.:::::.:.....:...:...:.....:.:::::::.:.:.:::.:::.:.:.:.:...:.:.::::::::::i:i:iiiiiirrrr7r7r7777Lr
--vr7v77rrii::::.:.....................:.............:.........:::.:::::::::::::::::::.:::.:::.::::::::::::i:iiiirirrrr7r7r7777v7v77
--Lrv77rrii::::.................................:.:.:::.:.:.....:.:.:::.::::::::::::::::::::::::::::::::i:iiiiiirirrrr7r777777v7vvL7
--7r7v77rrii::...............................:...:::.:...:.:.:.:.:::::.:.::::::::::::::::::::::::::::i:iiiiiiiirrrrrrrr7777v777v7Lv7
--i:iiriiii::::...............................:.:.:.......:.:.:.:.:.:::.::::::::::::::::::::::::::::i:iiiiiirirrrrrr7r7r77v7vvvvLvs7
--:.::::::::::::.......:.:...............    ...     .i. ....:.:...:.::::::::::::::::::::::::::i:i:i:iiiirirrrrrrrr7r7r77v7v7vvLvYLv
--:.:::::::::::.:.:.:::::.:.:.:........ .rvi:.::ii7vuIgK..:::::.:...:.::::::::::::::::::::::::i:i:i:iirirrrrrrrrrr7r7r77v7v7vvLvYLJv
--i:ii::::::::::.:.:.:.:.:.:............UPPgq55bEZK1YSqB2 .:.:.:.....:.......::::::::::::::::::i:i:iiriririririrrrr7r7r77v7v7vvYvsYL
--7:rii:iii:i::::::::.:.:............. :Q2J2PdbKUJsjSSPBB   .........:rr:.......::::::::::::::::::iiiiriririririrrrr77v77vv7vvYvsLsv
--rirririrrririi:i::::::.............. .MMjJ7Usrvr.rQRDBQU    .........7SqbPjr...::::::::i:i:i:i:iiiiririririrrrr7r77v7v7v7LvYLYvJsL
--:.::::::::::i:i:i::::............... :Bv iSvYIr :rbBBQBQgqI       ...:qsUIbQK.::::::::i:i:i:iiiiiiriiiiirrrrrrrr7777vvLvLLsLYLJYjv
--. .......:.:.:::::::.. ..:i7u1i..... 5B7rXBbgBQMIjPBQEMBQZqv:::ii7LJs2jvv1Xgg:.::::::i:iiiiiiiiririiiiirirrrrrr7777v7vvLvYLsLJsJJY
--. ............:.:.:...iY5J7S7. .....JDQPRQg:UBQBPvBDPSgBgvEBQ15SqSL7uujsKdQBD..:::i:i:iiiiriririririiiiiiiiirirr7r7r7777LvLvYYJJuY
--. .........:.:::::..iPP1v7rurrrrrvijgQXZDBq7rdBBXEQDQBBDJUgDPZKIJvrZq2uZRBBb...::::iiiiiiiiiiririiiiiiiiiiiririrrrr7r77v7v7vvsJuus
--. ............:::::.Id172ILJqS5XPP7uBBQgEBBJYQBbjQMQBE2i5BQEgUPgSs2PKgBBBZr  .::::i:iiiiriiiiiiiiiiiririiiriiiririrrrr7r77vvYsuj1J
--. ...............:..PQgPqP1UqqU1DBUiPBBBbIBBRQB7XBBgXvrDEPKqv1ZgSrSBBBQK:  ..::::::iiiiiiiii:iiiiiiiiriiiriririrrrr7r7r77vvJJ1u2Uu
--: ......:::::........UQBRZuYJdMLjMQ2:JMQBqBBBgBBBZU7:bg1S2rIZbDDQXBBZr.  .::::iiiii:iiiiiii:i:iiiiiiiirirrrrrr7r7r7r7r77vvYYJYsYjv
--. ....:vr...:r:..:... :qQBXKE5ZMYIusdr sXRBBBBBKJ7.UPs7gUsSQMBBBQQJ:   ..::i:iii:iii:iii:iii:i:iiiiririririrrrrrr7rrr7r77v77777777
--. . .ivriii.rY2i....:.  rSQBBQQRdJEbUJ2: r. s 7..UDIUXgDgddMQRPv:.  ..::::::i:iiiii:iiiiiiiii:iiiiriririrrrrrrrr7r7r7r7r7r7rrr7r7r
--. .:7us7uQBQUrrj:....:..  .r2BBBBgPDgEIsvYr71iiXubKPbdKPP5qQX....::::i:i:::::iiiii:iii:iiiiiiiiiiiirirrrrrrrr7r7r7r7r777r7r7777v7r
--. LDgPIXBBY   ..:........     iYPRQEPJUPb2ZP5Js1ZbqI5SPdPgBB. :::.::iii:::i:i:iii:iii:i:iiiiiiiiririirririrrrr7rrr7r77777777v7v7vr
-- iR7rBBBBr ..........  .          .77bDSsv77rrLuJSZQQBQqKBB. .:..S.::i:::::i:i:iiiii:i:i:iiiiririririrrrrrrrr7r7r7r77777777v7v7vv7
--5BB.sPBZr ..:.............. .         QBBDQBBgQBBBP1BBb2gB: ... vB7 ::::::::::i:iiiii:i:iiiiiiririrrrrrrrrrr7rrr7r7rrr7777v7777vvr
--MQBBBMI. ..:..............            .BQXuBBKPBBgvXgU7IBI  . .EBBL ...::::i:iiiirii:iiiiiiiiriiirirrrirrrirrrrrr7r7r7r7r7r77v7v7i
--QQZ:.  .....:..............            7g77:: .:.iL7rijSBD   .BBBBbr7i:..:::i:iiii::i:iiiii:iiiirrriiiiiririrrrrrrrr777r777rrrri72
--Qd  ...:.:.:.:.:...... . .         B    I5.    .: .:r1JEBB. 7RBBBB17vU57......:::::::iiiii:i:iiiiiiiiiiiiriririrrrr777777vr7r:iKRB
--B. .:.:::.:...:.... . ..          iBr    Q1: :75: :i7YXBBRQBBQgRBKrii7J52i. ir:..:::iii:::i:i:iiiiiiiiiiiiiiiirirr7r77777riPBEPBBD
--d:.......... ..... :LK: .i        UBBZ    qX:uQZqRK7jgQBQgQBqbQBXU5XI5jj5ZPuEBEi:..::i:i:iiiiiiiii:iiiiiiiiiiiirrrr7r777rirBBBRQY.
--MRgXUvrirSZP5Li:..11Pg:iv..   .:::7uDBB5.  gPvq2PKLPBQQQB5gQZPBPUqDDgZPIsvj2JYPggb7.....:::::..:::::i:iiiiriririririrrrii:qBM2P7::
--RDZDdPI2jJIggBEJbBBBQBBQ7:r77i..     .5BBBBQBMuv75BBQQgBBYLEQBQLvsJIS5jgIUKM7iiv5dBR2u7:.....:r:.....::iiiiiirrv777vi:ivYXRBs..i7r
--DdgDgZgEEKPPQPQ: iKZj7gDBgbXI7r:..     :SQBBBgBBBBBQMgBQBPr.2BP::.i:i77YMBBBQv77uuXBQXXbgPIJSBBgZXu7ri:.....:iLY1sIXRbXPMQBBMZU:r7
--ggDMgRMMggZZbEMB7. .1d1gdgrvivSJri:::..  :vPMQBBBQZZgBBBvPQd:Qr  ..::vYBBBggQB51J1UDQQ5r7PBQSY1QRQQBQQZKjL7rv7i7jjrudPSQQQgQKRBRir
--RgRRQRQRQQQRMggBBM5:.rZBZgX:rrY1X1vrririi:::irsIZQBQE1MBSIIBK..    :i:BdB1i7bMQqbEgBB5BBb7vXQgKgQgMZggQQBQRDZ511uqgBQ1JbgRRR2YY2Zv
--QQQBQQQQQQQRgBQQbMQBgUYRMZB7:rvY7552Lr::::.:......:ij1r1QBPBB..:..  iXBi...i5QgQBBJuPgERBBDJrLdBQRRQgRDgDMgRMQMQQQgMgQRgPDMQILYvvJ
--J5BBQRQQQQQQBQBBBQggBBBBgDBRYjDquY2KqSu7i::..        ....:rvP..v::7rLBBv ZR7qDRBs.    .:YbBBBDDQBBBBBBBQBBBBBQQQQMMMQRQZEZQgDLvsIj
--. i2gQQQBBBBRqLr:sMBBBQRMRdZqLMBQgbbqdPZXJri::..     ...:ii:..:77:rJQqKMYYvsZQQB  .:.. .7LY2PQQQqKPqPdPPEEPggQQQQBBBBQQBQQgBBBd2YU
--:....:jKXsr..    .i:JZQQEDQQBPJ5dgQBBDggMgbs7ri::.    .i:.:7JJuJv:rQ5vBqRvqQDRBj .:.:.:vvrvUb52u7vs7ss7rvr715XK52LJ15uqPgZgMQBBBBM
--i::i:........:.:::.  iivKPYi.      .LBQdqEDMIJv7i.    .7r. :irYPIZBB EsuQBgPZBU .::::ri777JdKKq5JXX55X15ssUULqZDPXv1UULJ1IsYj5SgMg
--r:iii:ii::i:i:i::::.... :.    .      .DQbIU2ZK2Jjrri  :LUSKKDZQQBBBi15KQQQRgBB: ..irivrirYgMEKPU2XX2XI2KU2b2XKEdEdP555PPPKPPPS5sJs
--i:iiii::::::::::::......     .         7QBP5IbXPrvr rDQQBBQBQB1MXDvuB5gDRBQQBBX .::v77uqXqIPPdPbKbXKPX5S2X12K2IZgESbbEKqPdqdbPbgPK
--i.:::...............................     5QEbPUrirrQBPL2P .vPgbZMDXPuBRqQRBDgBB7 i7jPPRB5:SEgQEMQMREDZZqbP525uPgMddPPXK5PPPqPqPPDb
--:.....................................    vBBq7vqKBM72.  iQgr1DBIPPIDZBbqQBb1gZBRZMBMgPMs:7XMDgBgggKgBQBBBBBRMDZggZEKX2I1ddPKP55Xb
--. ..:.:::.:.............. ............... .SRZgQBQBSLir. :qU5DXMBQMBgS1ZgXPI2SEBB5DZQggdgQPP1vMEgQBRBBPqPZMRQZdPPIqDPKS22udPbPSISU
--...:::::::::::........ . .................   ijBBBBbS1v5dSPdggPdMBQBQBMKIPqdsXdMQMEIMPdBPEgZdb2vv1SEbPKKv7LJ2S22PPPREdKS1sIdXX5XI1
--:.:::::::::::.:......   ..............:...:..  .XBBBRMRDgQBMggQQQdEZQBdbMS2Y22P5gdD1dQ5bBKEZdZEujvLY1KgMgI5ISEbPEqUjKUqdgEbI2j2uuU
--:.::::::::::::.:...:.............:.:.::::::::::. .1BBBBBQMggMBBBQQD5sjUZiKZXZPIJ1QQBbDRXBQ2ZPUjvi:iggZXu7sgZKu7Yv1XvUXvjXPEbIJv1PE
--:.:::::::::::::::::::::::::::.:::::::::::::::::::.  LBBBBBBQBQQRRgMMDDMgI1gMESJUYJdEBQbDZEYXg55JsL15dd1r7vPqXK52JbgvI5j5dqqKS1KbPI
--:.:i:::::::::::i::::::::::::.:::::::::::::::::::::.   .7XBQBBBBBQBQBBQDEDgEEUERK2ILujEQZZdUKZgQdXq2uiXMZ5S5bSXPsL7PRPEEQDvi7YqPqXu
--i.i:i:i:::iii::::::::::::.:::.::::::::::i::::::::....     .:7JKPZQBBRrPDqLLvSMBgbqKJ7rXgdgBXdKXUssI1iYRqJYS22rb5Yi:jZdZqKjUSXXqIIL
--:::irriiirir:i::::::::::::::.:.:::::::::::::..........          .sXBBgbMEZgEIYjgBBRgPurvSjQMU:..vRgdqqr:rZZDj7ZZ5s:KdKqP5SKP5XusJj
--i:v7..:7v:..i ..:..:::..:::.:.::::::::::i::::::...... . .....  .7jIMBBBBSvEdZb2vY2RBBBQvJ2igZ1:.IXEbdPbJuPqXqSXUXPqg5111Js2ujLLY1j
--2..i  .ir: .77.rr. :::::...:.:.:.::::i:i:i:i::::...... ....  .LIJUgPBBQBgj5u7sXDIsJs5XMBYsLvbgJIjvJQgDgqrrrLJjr:SBBDZ17rir777YY11j
--g. :P:.i5j:rqgdIDIv7r:vuL:..:::::::::::::::::::.......... .iPUIUqggUqqPKbEPXqIX1. dBgX5uI:uBDqYi:.iSPSUi:....qP11JubMgXv7r7vYLsYuJ
--qPd2rISuvu2qEDKUJXj5277j7vvi...:::::::::::::::.....  :7i.:iURULUD5 .i77J7i...:irrv7L7sIDZPXRgKKri..r  iPPPSviEZ17: vBQQEPPqdqPKPqP
--KXZdKUSsuuXu1XP221:r7.:Y:.7Iv:..::::::i:::::....ir:.7r: iJJ2RsKQBK:PMdqERMQQQPv:YRZgI .:UZX2IPgbEPZZv.bRgggMQDPvr::igDMguvJUKSPqP5
--PXSdZEKbKXUKS5SXIb1L5vSY:v22jj7i..:::iii::..:..ri::X. :7Ssr2qPPYL7JBBRDEPggQs.   LPsL    rY:.:KPj21v:iL2Id52svrvU2Y7gMDRQui7Lu15II
--q2XSX552XKPXPqbEdPd5UYq2rrXri2UJv:.:iii...rUSrJii7q5j5qPYvJIqEQd. JQQZgEbbPX7.    . .:    i.  I    :.  .rvL.  JgBDdSSqDMQBUrLJ1U5I
--7rrrrririr7YLuIPbPPDPIX52PPX2gD2UI7....:YZdbPQMDSqJi7jXsr55qbBQBU.dQMDgEsJX1i    ..   .7j25i rXv  1Qgu   sJ:  XRZZPq1j2RgQQdJU2SSS
--r:riririi:::::rsKXqPdqKIsSIYSPZDZIqXi::2BQQRQQBBBBBBggqj22DqBRRBg.5RRPEPLrsIiiqbKbX    iXJ:.v55r..vXqbX1XLJ21vvggbPXXU1UZgMBDUI2X2
--i:iriiiririii:::isSXXEb11ESXdU1RQDIgIYv57IPRQgqSbPKqgQbZqESqBQBBv:PQgbXgYri::vjDPd1  :vZS1   :.    rX12Pv.:7L1YYdbqq55I22gRRBRSqKK
--r:ririiiiiiii:i:::7uIqD5P2U5dSDBBbSsiij  iUqrru22rjSZKgRRMKrBQB5..PRg51ZPXP:.7sr2PK7r:.:v. ig2j:   iY...irr:. .iqKbKK5KSjdgDQQgSbK
--rirriiiiiiiiiiii:i:irsU5qDMQMDRB5Yv  .r..ijXiYIP7s5PUJsQQBbYUZ7:jQRBQqjZqISdKbi  r7ur   .  :sIuP7.:qJ.   .:r:. 7bPqqI5XPLPREZMQg25
--r:riririiiriiiiii:i::7uu2IgQBQqi:Ui.:71  7P7vXdPPZZDguvBQQEPPu7QBB1dgdDXqr7r:i7  .  :rj1qi   P7.vS5r:rv: rPqI7vXZPPS51ujLdDPEZgQdU
--r:iiiiirrriiiiiiiiii:is2us1Qs7vL7q   :i.KgD5XqdPKPdPErXBQRgQBURBBg:KMPXS2KKv::vZdK:  iXuUP. 7gJ  .ir.:UPKQZDDgDDdP551uYY7gPK5KPgR5
--i.i:iirii:i:i:i:i:i::.7u21IvrPi .: rIq7vUSqY5qE5ZDMdD7gMPPQQMPBQ2s72BU5sUdRj  :PqE7   jjvUXIPSP7.  :i..r5bZbEdDZb55jUsYruZPIUjSXDP
--:::i:iii:::i:::::::::.:1SSJYvL .rJ:.rXiYUEXPdgEdZggE2vQ1rSBBDBdsJQULBuY1IqU2. YESP1  .Kv  .v7rirL.7Svr  YEbbqdPq2UUSjvr7dbXIuuu5IP
--i.i:i:::::::::::::::rii7UJqYrLY:iKirqK1qZZdSqdPqPZZPqjQ5vYMBZsrPBQ77QKvZEIIKDDDPSsUUXPE7   :i:iiUdQMRddKEPKI52sYjYUjsrrqESS12uuJUj
--:.::::::.:.::iirr77v7riv5ZgdKgdDgBRQQBgRgMgEdbKZgXjISXgZPUSS7rEBQQijBMvYvivKPPPZJ77s1IUsirrJ7. iIIPdDgZd2UjYv7iiv1JLirqb5I1U11Yj1J
--:.::::iirr7vYvLvv77rriJPgRgdBBBBBQqKRZ5XZgQQBPPQKrU15vgEZbqQPSBISU.2BP2jvii72JPU. .7urrsdQQgq: :JSdqPS5Yv7Lrriirvv7:LPP5522ujs1Ljs
--ii7YsuJujusJvL77rrrri:qRgBBBBQI1PLiubP1KEQQBBZPRD7rsJj5g5KIRRQ2JgR.qRL5BQBRv:rvLPZqPJ. :YgDbEEIjKE5KI1sv7v7r::::::r1PqIjJI1UYYsjvL
--1LUJJLL7v7777rrirrrirs2vXKMqdi iXv5DgdXPggQMP5bbgbUY1UY5PssUgISdPi 1qjBQQBBg  iqBBBBBv:iKDdKPdggDXU7rrvriiii:   .vqXSU1susUJL7u1J7
--v7vvr7rrr7rrirr777iss7.iXX::7iYEEdIXPdXQDgP12SXX5EdqujjUs5s1KUgB7 qZr2BRgQRBgIPd2ZQMgBQBQQZKKPqdqI7i:iri::   ..71X221UJ1juYY77rJuv
--Lr7r7rriiirr77v77rus:i.vE7.YISPIE5jKgEgbdd7vU5IU1jXPbS1usrv5PZQr.IZ55UBggMBMBQBBQDEDDZMbgRBgqussJv7rr:...   :vIXXUUujYJsY7rr7777J7
--7irririrr7r7r7rrrrirrKY7Y2SdqXi7PZPRMZXPZDrr77YU1UjSbZKPXvrYY7:.uELuPBgMgDgBQBQRPDQgdZMgdMgBQEuv77rr::.::rY2SP5I12Js7vrrii:irrrr7s
--r:rr77v7vr7rrirrr.:srJXdbDj.7UUERMEdgqP5DMPv77Jj221sIUIXbZBggP7JQj2UgQQQg77sY7uKvUIjbPSUdRRPQBQZEqS55U5SqSqI5IIJjvLrrii:::iirrrrvU
--ri7777r7irr7r777v7v7.qgPYS:72PdZqEKPPdS2IbdDPP52u2uus1SP7r:.IQ5ESLsPRRQDIq5vJLYYjd5s1PbuiIMbPMRQPqXqXK552Ussvvrrrrri::::..:i:iirU5
--7i7r7r7r77v7v7v7q7.i1gRi:YUKDdPI5bMKE1sXIJ1KEEZSqISqZX2:...:JqqX7LMMgPDiXMusKgQgRRMPbEPdsrJPgdggMXIuJj1JsLvrriiir::::.:.:...i:72Xj
--rir7777vvLvL7v7Yq::SSU572EEKYSdKbQMEqrvuujuIXS252qPEr..::i:.r2gdIJEQ1ULv5ZXQQRgDDggRgQQQRg5r5DXDZRqjYvrriii:::::.... ....:.:iJSXIj
--7i7777v7YvLvvr7.271EJsIU2vP7sPRDMgdMYi7v7J5XSJU1SqP: .:::::.7KMPSIQKYXvvqXXRQDEDMEDDggRDRgELrd15bZDXvriiiii:.         ..::rL5S51Us
--7irrr7r7rriii::.qq75uU5Si7ssXREEKPPMbJ77r1U2jSXPPIi::iiiiii:iu2PuggbJI7YSudggRgZEDgD2Y77vjXPuJu5SPSgI7ri::..          .ivUIK2IuU1j
--riririiii:i::.7r2Jv5SUSSuPddREXbZPMbEdE5PddKPbPPv.:irrrrrr7risXEKMQq2biJS2gPEZMPKXjUXu2v77LLU27PBY7qZX7ri:...   ..:i7v12qII1211Juv
--i:::::::::::.:Zq:KbMBgRQMBZdMggQDgdX5qKddbKKSIjD7ir777r7r7rrirIPdgD17S7Lj2gZbZDSXqYSXsqZuYU2PMju5Iv5SDgP1jLL7vvsLUU5II25U2U2jJsJsY
--i.i:iirrrr7rirQDPQBDbMgqQKvSgDQQMbKJ215XK5X21YKg7irrrrrrrrrrr:YqMPP5XX7UsiDdbZbU22PdduqP22KdBMQ7iLKKDJPqPSKXqSKSI2Iu1JuU522jJYJLL7
--7r7L7777rri:.7QQRBQg7U2rsS2gZgRQgqU12KSX5KXSs5gDiir7r7rrr7rrrirXP5P5Y2:7vrPEEKUSr7UdPdPZgZPgggQqXJ25IuLIsJJ1JJs1uuJu15uUjJYYvv77v7
--7:i::........vDgBEQdL2U7XdDPqdgggUS2XSKKPqPqEZgbir7r7r7r7rrrri:vPId5vIu7PXZDYrrYvJUIJXP2P2XdEdZP1P1irUjuJvJvYvsYusuuuLsLv77r7rrr7r
--.....::rrrr7r7LKd5PZj7IbZSqqPMZDbJjJ2X5qPdqKZEbbirr7r7r7rririi:rS2SZIXdP5:ug1Y1Du:is1IviJSLY1KPP7uXrr1IsU7vLvsvvvv7777rrrriririrrr
--ri7777v7v77rrrUuKqqKI1PPX1EDgdddDLL7s2qPPSjUMPPPrr7r7r7rririiii.LqXgDZPvsrUEZqSqri7U5.irU7rvjiU7UYqUrsds2vrv7777rrrrri::iii:iiir77
--vr7v7777r7rri7rYqZKSdD1uqdEPdDPEDbU55PddIJsqPqKSi7r7rrrrirrrrrriiqbQEddUs5dgb:.7SSU5YYLJSJvjJvJs5K15Sjj5uUr777r77rii:::::i:irri7vs
--vi777r7rrr7rrirUDbKqDgq5PbPSdDdKbdZbEPPSIjSPK1Kuirrr7rrrrr7r77vrirPEZSZKuUEdS:ri1XsrLXq1vJqUJXXiJPuJ2Ju11I7r7riir::::::.:ir7vvvY1u
--rir77v777777rrrPqXZd1KggX2PddZPqSXSqqqS5I5UKUU5Lr7r7777v7Lvsv7r7rr7IX55XUSXKKXUL7Y.i7U5i7YuSiLU7v51sv1j2sIjrrrii::::.:.:r77v7LvjYJ
--rirrrrrrrr7rv7Y2qXdKqKdZdPZEDdbS215U2uUIX2IIJJSYjJjJJsussYsv7r777rr722X5SKqKq5IuUJ77v72:7sJ1ivIJJUXJJsJjjj5j7iiiiii:i:i:rrrr7vjJUs
--riirrririiirirrjKZXIPDXKPDddqEPq1uISuuUKI1USuK51u111JssYLv7rr777r7rrrUIKIKKqS1JUJvIIJjJssjL7YU1L7J2SjJJ1su12U1Lv77r7r7rvvss112uuJL
--r:i:i::::::::..7E5KbPPdPKXdPPPPKKuI5SXXSSUKUIXu1IJYvLvL7ririr7v7777rrruuI255K1uS1vYU51i711j:rJ1JYvYuJYsYuYsvuuI2IISISISI5U2juJjsJv
--i:iiiiirirr777ri2P5PbXKEPbdZEZPKPbXXIS5IUSUjjusUuJ7v7Lrririr77r7r7r77rrL152KI52qIUY1Su77L5u77vJ2YYsJ5511jjLvs1j2j1u1JuYJYJsJYYLJJs
--vrv7vvLvv7LvLvvrrUEKXKPXdbEPbqbXXjUU512juuJsJYuJsvL7Lriiiiirv77r7r7r777rJ2IISI52S5I1S1jYYsXsJYsuX11j2IIIK21Luj1jsLLvLvLvYvYvsLJYuv
--7r777vvLvLvv7v7vrrsPK525IX5KXKSSIJYjj1JjYuYYLjsJLsvJr::i::ivvv7v7v7LvYLsvu1IIXSSIXISSX5Uju2S12u2I2122qPZPP1YLYYYvsLYvYvYvsLsYJsujs
--rirrrrrrrrrirrrii::ij2I1112UI2IUSjYLJYuJuJJsjJuJusJvi:i:i:ivsLsLjJ1uU1U1UjU155SSXIX55UI5512U5IS2KS5SqXbKX2u7vvYsJsYLYsuYYYJJusuju7
--i:ii:i:::::::i:::::::r7ssssuJuJ1YJvYLsYjsjsjJus1j1Lr:iiiii:vuUuUu2UI252X55221uYuu1j2J1jU122512SPqPXXI22XXSISJY7sYsvsYJYYvYvYYsvYvr
--i.i:::::::::::i:i:iiiirrv7YLYYjsjvJu111JJYjjuJusuY7iriri7777juUJ1J1u21IuujJsjssvv7sYuu22SSPPbPPqPXqSSUSqq2S5KUYLYvLvYv77L7vvv7v77i
--i::i:iiiiiiiiririiirir77777v7YvsY1u1j1JjsusjYsLL7viiir7Lvv77r7vsvsLYLsvYYjsjj1j1uUu22XXPKPPEPbPPXK55IKKSYsLsvJssvL7v7vvL7v7v77r77r
--r:ririririririrr77v7v7vrr777vvLvssuj1uuJjYsvv7777rr7v77r7rrii:r7vvYLYLsLYYuj2ISSqqPXq22155SUUjUu1uuj2uYrv77777LvYvvvvvv7777r7r77vi
--rirrrrrrrririrr7rrrririiirr77v7v7v7v7vvv77rrrrr77777rrrr:iirr7iiirr77vvssUUS5KSXSXXqKq5IjuJJLsvsLYLLvL7vvLvv7LvLvv77r7r777r7r7r77r
--7:iiiii::::::::::::.:.::::::::::::::::::::::i::::::::::.:::::.:.::::iiii7r77v7vvvvv77rrrrirrrrrrririiiriiiiiriiiiiiiiiririiiiiiii:
--
--
--
--                                                                                                     .Y..                                 
--                                                                                 .:vXgdBBQKgs.     XQq.i:vJ                               
--                                                                          ..KRBBBBBBBBBEX1BBBD1.:1BBP:7:7YQ2X.                            
--                                                                    iY7BBBQBQBBBBBdr     5QL..rBQBB   7Md1QgQ:                            
--                                                                 YgBBQBQBQBQBBu::         K    UBBR   7UPQB.B:                            
--                                                           rYRQBQBQBMBQBBBi77.            M    PBBQ   . iBL77.                            
--                                                      .iMBBQQQBQBQBQBQQgi       i:.       BuJSBBBBB  ... .i .r                            
--                                                :bv:rZQBQBQBgBQBPBQE:         qBQBQB:.iUuU.7iSr7QqrrKBBBQKvJ5ggB                          
--                                      .:. .vZQBQBBBRBQBQqiBQBQr.      rIqY:  Sq.XBBQDPI:  .ui  .r PQBBBQBBBQBQQ:                          
--                               .::.rPJqdgdEBQBQBZBPgBBQBQBRP:      rYUQBBBQB:Q:.:jr.     .dU   P  :siIBBBBQBQLB.                          
--                      .     .KSIBQMQJBgsiUBBQDBMQdDQBQBQQs.       :q    IBBgKii:JL       ig   2v :U5: .QBgB2gEBB.                         
--                   rBBQgI7riULiQK7MZ7BQS7BMBZQRBQBQBQZ:    :LdQBBQR  :77ri..   :d        75   E  s7I   i jIB.BIBD                         
--            7:IJu5BQB7iUgXIiJrgLsRrvBddMBBBQBQBQBPY.      Qi  vQBQBiuuY:.      P5       .vI   Z  i71  g   uQiZvQB                         
--       . ..QZdSiIBEP1rr1Mq.1vYYdq.rD52dP5BQ5YSir         P.  :7dji.:.          d7        7s   Q  YIJ .B   iB:ELBQ                         
--      rrJK1s7uJj571IQE vBviQ:UMvB.UQBBB2d.         .::7r:R2YqYZ                U7        iY   Dr .1iDPBQi.2B BYQB                         
--    .B sq::7.Yi5 ..IBBvvQgdb5PDggBQDbLiX     ..IRIrPPMbPqP:  j.                Su ::irr1Y:U    B  i17vMBQBB.2BqBP                         
--    QdJgv.:.rr17 5i7Q2B:sIDr7E.Ysru7r:    .jRRP:.idZr.  U   :K          i..:vr1SB:17I7KuugQL   .QiQ1i:ii:rvqBuBQ                          
--    QSgQqi::77YQ.L:Ug:.QSMggEXrIUr..  .L2QQB7: iqj     2.   v:   .::vviqQUJJ5uIvd5:vXPbgXv5B:   .IKXRP7EQBBBIZQQrEX                       
--    .rirKZKJB:KgErrLQBEPj1dPQPJ.:    U:  L5   Lq.      P    Ld7S7JjSP2qPEXUvri7JsKEQBb.E.s::B.    :2QBBQBQYiMQBQBQi                       
--   vr.j1Ud.rQuu5EBJJ25DB7:          QY.irU.JQ q:     ::s:YvPYQPduSrr727vs1KPEBQBQBQi7v : vBr:BX   .u:LgBEREBQBBBQB                        
--    iijDU  .X1BrU2PIRUi       . ..:.BUQ.B :gBiS...7rYsR7Z7MBjrIIgZgdQRQQBggqBQBQBQ:  1   :BQE BQv     7qZvbMBBRXBZr:                      
--        .     .i        .UQBQBZQurrBQ K Qi YQjQKZDEDEUQBQgvviBQBBQ7BQBBBQBQBQPJL:. UBBM1srBBQB LBBPu:i:77UQBuBBi:Qd                       
--                     :PQBQ.IP      YB E Ki:iBiKSBBBRBddvX: 71Qu7B LQMdBDQQBr:     YrX.vbBQjQBBB::QBQBQBQBQi rBBQ2iBQ.                     
--                 :SQQQL5i. r   .:ii uii:.UsSQBQM:  :       .QB EQ QB     UBr      B : rBQu5BQBBBX..  .BBQB .QBQBQd:Bq                     
--             .vvBsb7irq.  BvrYJv7:7..D   Pj QQBr  .J7qEDBdr rQ.L. s   iZr BQ      P.7  1BuBQBBBQBQK7  BBBQ  BBBQBQBDSv..LYi               
--          :uJriJrr:Y iQ  .dr..    .v Dr. :2 .L.JPBBBQPLgQBBBiUr:.i:rQY:BQ BB       BQ:  LBLXqKSXvIK ..1Li::dQBQBBQ.iJMB: :B               
--      v5J7Bqrq7Q25SQ7 B.  Prv:irir:i IBBBvi:i  .BQBg.iQBBZBMBgBIBQBQP: gv BQ     .ruZXs..                iBQBBBQB2  rvJis.BLriii.         
-- r7qdUQBYXP2QB qvr::  Q:  UK. .. .i7 r:gQ17S. :7BBQ riILrs::   .rBBBY  gd QB     .DdZbvgDBQ. rKBBUMQZBgb1QQi.v2  ..j7K:iv7:vrriPBE        
-- Ri7Y2 RS .:   u:     Q:  j:. .   .  ir7BPiQ.XY1r:. i:   7s .:   UuUi  QB:7B.     7vqv 1BQBQBBqLXQi    7i       .ri   EL        BQ        
-- Qr7ur:7r:7i.7:gR7sXBQ1BEPg:v2.:ZL.:I  B: ruB..  :        ...7. :BBBQ .Q   B      vL  :BBBQBQB:  P     gg ZYE   :i 1Q7  SPE7vv.:QU        
--:MQSBEgQuKZ7BQBqIS77BQK7vQB vIRYgBBB51grE. .7 B i:v         :r.i:vS.i.:.:r:Qi     ri.  gBBBQBB:  7     .Kii.:  i qBKd Y iQrPBQ.           
--budQiibU7777.ir7iqIqYbQ7iJX2 vJqM.Q7 RXSI: 1Q 7 :.5         gr     :75117s: YBb7v1J:ii.B 7QBBBQBBBQBBB     : i . BB d1L :i .BP            
--PSvZ55BJBRQiMbsI.v57vv:r2Ssqd5rUDiQ77BBBQQYBBZBE:...  r...  L r        :..: 5EBgBQRBgi j  YQQQBQBQBBBvQQ2..sB5Q2K.:i.qBQDQB:              
-- .  .775sK7gQZP12PusE2.L.QvrsPKviiru7XLLrLX2LdZQBdv. :.. .            .:   :Qv.BQBBQ.SQg5BBBQZQQQRDB  BBi  L2Qid:K L.::uBBQBQY            
--          1Kr:7vLDZ7PI1XuRY 7ivgX7sBrviiSbr...:.BKI:ru. . 7   .i   .. i:. rDBQ YQi   QBBBZMQP BZi:BQ  BQ.  Q QdiR.b:7.B7.UBQBQs           
--                 r vM7rrSErJvuSbIBYKPr:rbiY1Js.g7Prs2Y. ..7rr2i.::i::.r7:.iBQBq... vQBgBQBgQQ DB.Pr  7QBJ7rgs Qb7B.M2ui:d  BgB:           
--                   :.irIP.1Quqi7v5:XDP5 BvB7iQDBiBUZvQjSX1..  17Y.:vBdL:r:::.irirsdQqSBQBBBgBQ.r:   iQBQi7Lri  . .           Pv..         
--                     : iB.su.D:: K.M Yq.UiQJ.rrr.D.5rrQKbBQY:1jIQSrLvY   iv1YQDQbii:... .. .:v7..JJBQBQQ SuKXRdXqdgBDQZQUdDg5BSuJSIXIUrvJ:
--                        .  i :iP5 Bur7E:jiUbr7gXdiiri7di.gPjQvg1:SIQBQEXBQsPPIIL.   :r2rvPP7vv5PqXSi:::.SZQQBQBQBBBQBQBQBQBQBq5BBBBQBBBs  
--                                : . .i:D r.7:QYiS.ibIvBiYdrBURii7siKBrjb2B.SBZPUPdsRBjBEvBQQQs..   ri7vKv7.::.:i::.::i:vv1:L1dQBBgL:iqZ57 
--                                        i  7 : .B2:1bLsrr:Pj Z:X5:v i5udQ:.gBr7JIgBQ.v7XJIiDXU. J1KSBBM1BQqBBMD:777v5i:i:.i:ir7rr.        
--                                                 ...i Yu  Pii1gv2u7ZP:QUBiPBMXZ.PBY5KggSiSiJiBQBXrSrqB5X.LRPur.:.77EMBQBQBBBZKi:r:        
--                                                          :.     i: u.vi:LJi.r:7.i: :IS:SrB:J..Bi IQ.d:5UrBBr7BQBgB7jr2vB:2:              
--                                                                                                    .  v   :. . .                          
----New series of simple scripts that just work..nothing fancy 

if myHero.charName ~= "Cassiopeia" then return end
require "DamageLib"
require "MapPositionGOS"
if FileExist(COMMON_PATH .. "TPred.lua") then
	require 'TPred'
	PrintChat("TPred library loaded")
end
PrintChat("Press F6 twice if E doesn't work!!")
keybindings = { [ITEM_1] = HK_ITEM_1, [ITEM_2] = HK_ITEM_2, [ITEM_3] = HK_ITEM_3, [ITEM_4] = HK_ITEM_4, [ITEM_5] = HK_ITEM_5, [ITEM_6] = HK_ITEM_6}
local castSpell = {state = 0, tick = GetTickCount(), casting = GetTickCount() - 1000, mouse = mousePos}

function SetMovement(bool)
	if _G.EOWLoaded then
		EOW:SetMovements(bool)
		EOW:SetAttacks(bool)
	elseif _G.SDK then
		_G.SDK.Orbwalker:SetMovement(bool)
		_G.SDK.Orbwalker:SetAttack(bool)
	else
		GOS.BlockMovement = not bool
		GOS.BlockAttack = not bool
	end
	if bool then
		castSpell.state = 0
	end
end

class "Cassiopeia"
local Scriptname,Version,Author,LVersion = "CassiopeiaExpress","v1.0","Tocsin","8.6"

function CurrentTarget(range)
	if _G.SDK then
		return _G.SDK.TargetSelector:GetTarget(range, _G.SDK.DAMAGE_TYPE_MAGICAL);
	elseif _G.EOW then
		return _G.EOW:GetTarget(range)
	else
		return _G.GOS:GetTarget(range,"AP")
	end
end

function Cassiopeia:__init()
	
	self:LoadSpells()
    self:LoadMenu()
    self.Allies = {}
	self.Enemies = {}
	for i = 1,Game.HeroCount() do
		local hero = Game.Hero(i)
		if hero.isAlly then
			table.insert(self.Allies,hero)
		else
			table.insert(self.Enemies,hero)
		end	
	end
	Callback.Add("Tick", function() self:Tick() end)
	Callback.Add("Draw", function() self:Draw() end)
	local orbwalkername = ""
	if _G.SDK then
		orbwalkername = "IC'S orbwalker"		
	elseif _G.EOW then
		orbwalkername = "EOW"	
	elseif _G.GOS then
		orbwalkername = "Noddy orbwalker"
	else
		orbwalkername = "Orbwalker not found"
	end
	PrintChat(Scriptname.." "..Version.." - Loaded...."..orbwalkername)
	PrintChat("Press F6 twice if E doesn't work!!")
	PrintChat("Press F6 twice if E doesn't work!!")
end

function Cassiopeia:LoadSpells()
	Q = {Range = 850, Width = 75, Delay = 0.70, Speed = math.huge, Collision = false, aoe = true, Type = "circular"}
	W = {Range = 800, Width = 160, Delay = 0.25, Speed = 1500, Collision = false, aoe = true, Type = "circular"}
	E = {Range = 700}
	R = {Range = 700, Width = 80, Delay = 0.6, Speed = math.huge, Collision = false, aoe = true, Angle = 40, Type = "line"}
end

function Cassiopeia:LoadMenu()
	self.Menu = MenuElement({type = MENU, id = "CassiopeiaExpress", name = Scriptname})
	self.Menu:MenuElement({id = "ComboMode", name = "Combo", type = MENU})
	self.Menu.ComboMode:MenuElement({id = "UseQ", name = "Use Q", value = true})
	self.Menu.ComboMode:MenuElement({id = "UseW", name = "Use W", value = true})
	self.Menu.ComboMode:MenuElement({id = "UseE", name = "Use E", value = true})
	self.Menu.ComboMode:MenuElement({id = "UseR", name = "Use R", value = true})  ---not ready yet
	self.Menu.ComboMode:MenuElement({id = "AutoR",name = "Use R if hit x enemies",value = 2, min = 1, max = 5, step = 1})
	self.Menu.ComboMode:MenuElement({id = "comboActive", name = "Combo key", key = string.byte(" ")})	
	self.Menu:MenuElement({id = "HarassMode", name = "Harass", type = MENU})
	self.Menu.HarassMode:MenuElement({id = "UseQ", name = "Use Q", value = true})
	self.Menu.HarassMode:MenuElement({id = "UseW", name = "Use W", value = true})
	self.Menu.HarassMode:MenuElement({id = "UseE", name = "Use E", value = true})
	--self.Menu.HarassMode:MenuElement({id = "MinMana",name = "Don't use spells if mana is lower than",value = 30,min = 0,max = 100, step = 1})
	self.Menu.HarassMode:MenuElement({id = "harassActive", name = "Harass key", key = string.byte("C")})
	self.Menu:MenuElement({id = "ClearMode", name = "Clear", type = MENU})
	self.Menu.ClearMode:MenuElement({id = "UseQ", name = "Use Q", value = true})
	self.Menu.ClearMode:MenuElement({id = "UseW", name = "Use W", value = true})
	self.Menu.ClearMode:MenuElement({id = "UseE", name = "Use E", value = true})
	self.Menu.ClearMode:MenuElement({id = "clearActive", name = "Clear key", key = string.byte("V")})
	if (TPred) then
		self.Menu:MenuElement({id = "minchance", name = "Minimal hitchance", value = 1, min = 0, max = 5, step = 1, identifier = ""})
	end
	self.Menu:MenuElement({id = "CustomSpellCast", name = "Use custom spellcast", tooltip = "Can fix some wtf problems with wrong directions", value = true})
	self.Menu:MenuElement({id = "delay", name = "Custom spellcast delay", value = 70, min = 0, max = 200, step = 5,tooltip = "increase if spells going completely wrong direction", identifier = ""})
	self.Menu:MenuElement({id = "blank", type = SPACE , name = ""})
	self.Menu:MenuElement({id = "blank", type = SPACE , name = "Script Ver: "..Version.. " - LoL Ver: "..LVersion.. ""})
	self.Menu:MenuElement({id = "blank", type = SPACE , name = "by "..Author.. ""})
end

function IsRecalling()
	for K, Buff in pairs(GetBuffs(myHero)) do
		if Buff.name == "recall" and Buff.duration > 0 then
			return true
		end
	end
	return false
end

function ValidTarget(target, range)
	range = range and range or math.huge
	return target ~= nil and target.valid and target.visible and not target.dead and target.distance <= range
end

function Cassiopeia:Tick()
    if myHero.dead or Game.IsChatOpen() == true or IsRecalling() == true then return end
	if self.Menu.HarassMode.harassActive:Value() and self:EnemyInRange(1000) then
		self:Harass()
	end
	if self.Menu.ComboMode.comboActive:Value() and self:EnemyInRange(1000) then
		self:Combo()
	end
	if self.Menu.ClearMode.clearActive:Value() then
		self:Jungle()
	end
end

function Cassiopeia:HasBuff(unit, buffname)
	for i = 0, unit.buffCount do
		local buff = unit:GetBuff(i)
		if buff.name == buffname and buff.count > 0 then 
			return true
		end
	end
	return false
end


local abs = math.abs 
local deg = math.deg 
local acos = math.acos
function PunkAss(unit)
    local target = target or (_G.SDK and _G.SDK.TargetSelector:GetTarget(E.Range, _G.SDK.DAMAGE_TYPE_MAGICAL)) or (_G.GOS and _G.GOS:GetTarget(E.Range,"AP"))
    local V = Vector((target.pos - myHero.pos))
    local D = Vector(target.dir)
    local Angle = 180 - deg(acos(V*D/(V:Len()*D:Len())))
    if abs(Angle) < 80 then 
        return true  
    end
    return false
end

function Cassiopeia:IsReady(spell)
	return Game.CanUseSpell(spell) == 0
end

function Cassiopeia:CheckMana(spellSlot)
	return myHero:GetSpellData(spellSlot).mana < myHero.mana
end

function Cassiopeia:CanCast(spellSlot)
	return self:IsReady(spellSlot)
end

function EnableMovement()
	SetMovement(true)
end

function ReturnCursor(pos)
	Control.SetCursorPos(pos)
	DelayAction(EnableMovement,0.1)
end

function LeftClick(pos)
	Control.mouse_event(MOUSEEVENTF_LEFTDOWN)
	Control.mouse_event(MOUSEEVENTF_LEFTUP)
	DelayAction(ReturnCursor,0.05,{pos})
end
function Cassiopeia:Draw()
    local textPos = myHero.pos:To2D()
    if self:CanCast(_Q) then Draw.Circle(myHero.pos, 850, 3,  Draw.Color(255, 000, 222, 255)) end
end

function Cassiopeia:CastSpell(spell,pos)
	local customcast = self.Menu.CustomSpellCast:Value()
	if not customcast then
		Control.CastSpell(spell, pos)
		return
	else
		local delay = self.Menu.delay:Value()
		local ticker = GetTickCount()
		if castSpell.state == 0 and ticker > castSpell.casting then
			castSpell.state = 1
			castSpell.mouse = mousePos
			castSpell.tick = ticker
			if ticker - castSpell.tick < Game.Latency() then
				SetMovement(false)
				Control.SetCursorPos(pos)
				Control.KeyDown(spell)
				Control.KeyUp(spell)
				DelayAction(LeftClick,delay/1000,{castSpell.mouse})
				castSpell.casting = ticker + 500
			end
		end
	end
end

function Cassiopeia:IsPoisonedTarget(unit)
	for i = 0, unit.buffCount do
        local buff = unit:GetBuff(i)
		if buff.count > 0 and (buff.name == "cassiopeiaqdebuff" or buff.name == "cassiopeiawpoison" or buff.name == "poisontrailtarget" or buff.name == "TwitchDeadlyVenom" or buff.name == "ToxicShotParticle" or buff.name == "bantamtraptarget" )  then 
			return true
		end
	end
	return false
end

function Cassiopeia:IsInvulnerableTarget(unit)
	
	local Buffs = {
	["UndyingRage"] = true,
    ["JudicatorIntervention"] = true,
    ["VladimirSanguinePool"] = true,--isTargetable
    ["ChronoRevive"] = true,
    ["ChronoShift"] = true,
    ["zhonyasringshield"] = true,
    ["lissandrarself"] = true,
}
	for i = 0, unit.buffCount do
		local buff = unit:GetBuff(i)
		if buff and buff.name and buff.count > 0 and buff.expireTime > Game.Timer() and (Buffs[buff.name] or (buff.name == "kindredrnodeathbuff" and GetPercentHP(unit) < 10) or (buff.name == "UndyingRage" and unit.health < 10) ) then
			return true
		end
	end
	return false
end

function Cassiopeia:GetETarget()
	local target = nil
	local N = 1000
	for i, enemy in pairs(self.Enemies) do
		if ValidTarget(enemy,E.Range) and not self:IsInvulnerableTarget(enemy) and self:IsPoisonedTarget(enemy) then
			local tokill = enemy.health/CalcMagicalDamage(myHero,enemy,100)
			if tokill < N then
				N = tokill
				target = enemy
			end
		end
	end
	return target
end

function Cassiopeia:GetDamage(spell,unit,poison)
	if spell == "E" then
		local base = 48 + myHero.levelData.lvl*4 + myHero.ap*0.1 
		if poison or self:IsPoisonedTarget(unit)  then	
			local bonus = ({10, 40, 70, 100, 130})[myHero:GetSpellData(_E).level] + myHero.ap*0.35
			return CalcMagicalDamage(myHero,unit, base + bonus)	
		else
			return CalcMagicalDamage(myHero,unit, base)	
		end
	elseif spell == "Q"	 then
		local dmg = ({75, 120, 165, 210, 255})[myHero:GetSpellData(_Q).level] + 0.7 * myHero.ap
		return CalcMagicalDamage(myHero,unit, dmg)	
	elseif spell == "R"	 then
		local dmg = ({150, 250, 350})[myHero:GetSpellData(_R).level] + 0.5 * myHero.ap
		return CalcMagicalDamage(myHero,unit, dmg)	
	end	
end

------------------------------------------------------------------------------------------------------------------------------------------------------------------------

function Cassiopeia:Combo()
	if (not _G.SDK and not _G.GOS) then return end
	local target = target or (_G.SDK and _G.SDK.TargetSelector:GetTarget(950, _G.SDK.DAMAGE_TYPE_MAGICAL)) or (_G.GOS and _G.GOS:GetTarget(E.Range,"AP"))
    --for i,target in pairs(self.Enemies) do
    if target and target.type == "AIHeroClient" then

    if self:CanCast(_E) and self.Menu.ComboMode.UseE:Value() then 
		--local etarget = self:GetETarget()
		if target.pos:DistanceTo(myHero.pos) < E.Range and self:GetETarget() then
			self:CastSpell(HK_E,target)
		end
	end

	if self:CanCast(_Q) and target.pos:DistanceTo(myHero.pos) < Q.Range and self.Menu.ComboMode.UseQ:Value() then           
        local castpos,HitChance, pos = TPred:GetBestCastPosition(target, Q.Delay , Q.Width, Q.Range,Q.Speed, myHero.pos, Q.ignorecol, Q.Type )
		if (HitChance >= self.Menu.minchance:Value()) then
			self:CastSpell(HK_Q,castpos)
        end
	end

	if self:CanCast(_W) and target.pos:DistanceTo(myHero.pos) < W.Range and self.Menu.ComboMode.UseW:Value() then 
		local castpos,HitChance, pos = TPred:GetBestCastPosition(target, W.Delay , W.Width, W.Range,W.Speed, myHero.pos, W.ignorecol, W.Type )
        if (HitChance >= self.Menu.minchance:Value()) and not self:CanCast(_Q) and target.pos:DistanceTo(myHero.pos) > 500 then
            self:CastSpell(HK_W,castpos)
		end
    end

    if self:CanCast(_R) and target.pos:DistanceTo(myHero.pos) < R.Range and self.Menu.ComboMode.UseR:Value() then 
        if PunkAss() and self:EnemyInRange(R.Range) >= self.Menu.ComboMode.AutoR:Value() then
			self:CastSpell(HK_R, target)
        end
    end

	end
end

function Cassiopeia:GetEnemyHeroes()
	self.EnemyHeroes = {}
	for i = 1, Game.HeroCount() do
		local Hero = Game.Hero(i)
		if Hero.isEnemy then
			table.insert(self.EnemyHeroes, Hero)
		end
	end
	return self.EnemyHeroes
end 

function Cassiopeia:EnemyInRange(range)
	local count = 0
	for i, target in ipairs(self:GetEnemyHeroes()) do
		if target.pos:DistanceTo(myHero.pos) < range then 
			count = count + 1
		end
	end
	return count
end

function Cassiopeia:Harass()
	if (not _G.SDK and not _G.GOS) then return end
	local target = target or (_G.SDK and _G.SDK.TargetSelector:GetTarget(Q.Range, _G.SDK.DAMAGE_TYPE_MAGICAL)) or (_G.GOS and _G.GOS:GetTarget(E.Range,"AP"))
	if target and target.type == "AIHeroClient" then
        if self:CanCast(_E) and self.Menu.HarassMode.UseE:Value() then 
            --local etarget = self:GetETarget()
            if target.pos:DistanceTo(myHero.pos) < E.Range and self:GetETarget() then
                self:CastSpell(HK_E,target)
            end
        end
    
        if self:CanCast(_Q) and target.pos:DistanceTo(myHero.pos) < Q.Range and self.Menu.HarassMode.UseQ:Value() then           
            local castpos,HitChance, pos = TPred:GetBestCastPosition(target, Q.Delay , Q.Width, Q.Range,Q.Speed, myHero.pos, Q.ignorecol, Q.Type )
            if (HitChance >= self.Menu.minchance:Value()) then
                self:CastSpell(HK_Q,castpos)
            end
        end
    
        if self:CanCast(_W) and target.pos:DistanceTo(myHero.pos) < W.Range and self.Menu.HarassMode.UseW:Value() then 
            local castpos,HitChance, pos = TPred:GetBestCastPosition(target, W.Delay , W.Width, W.Range,W.Speed, myHero.pos, W.ignorecol, W.Type )
            if (HitChance >= self.Menu.minchance:Value()) and not self:CanCast(_Q) and target.pos:DistanceTo(myHero.pos) > 500 then
                self:CastSpell(HK_W,castpos)
            end
        end
	end
end
function Cassiopeia:GetEnemyMinions(range)
	if (_G.SDK) then
		return _G.SDK.ObjectManager:GetEnemyMinions(range)
	end
	self.EnemyMinions = {}
	for i = 1, Game.MinionCount() do
		local minion = Game.Minion(i)
		if minion.isEnemy and (not range or myHero.pos:DistanceTo(minion.pos)<range) then
			table.insert(self.EnemyMinions, minion)
		end
	end
	return self.EnemyMinions
end
function GetDistanceSqr(p1, p2)
	assert(p1, "GetDistance: invalid argument: cannot calculate distance to "..type(p1))
	return (p1.x - p2.x) ^ 2 + ((p1.z or p1.y) - (p2.z or p2.y)) ^ 2
end

function GetDistance(p1, p2)
	return math.sqrt(GetDistanceSqr(p1, p2))
end

function Cassiopeia:GetEnemyMinions(range)
	if (_G.SDK) then
		return _G.SDK.ObjectManager:GetEnemyMinions(range)
	end
	self.EnemyMinions = {}
	for i = 1, Game.MinionCount() do
		local minion = Game.Minion(i)
		if minion.isEnemy and (not range or myHero.pos:DistanceTo(minion.pos)<range) then
			table.insert(self.EnemyMinions, minion)
		end
	end
	return self.EnemyMinions
end

function Cassiopeia:HpPred(unit, delay)
	if _G.GOS then
		hp =  GOS:HP_Pred(unit,delay)
	else
		hp = unit.health
	end
	return hp
end

function Cassiopeia:Jungle()
    for i = 1, Game.MinionCount() do
	local minion = Game.Minion(i)
    if minion and minion.team == 300 or minion.team ~= myHero.team then
    
        if self:CanCast(_E) and myHero.pos:DistanceTo(minion.pos) < 700 and self:GetDamage("E",minion) > self:HpPred(minion, 0.3) then 
            if self.Menu.ClearMode.UseE:Value() and minion then
                Control.CastSpell(HK_E,minion.pos)
            end
        end
    
        if self:CanCast(_Q) and myHero.pos:DistanceTo(minion.pos) < 800 and minion:GetCollision(Q.Width, Q.Speed, Q.Speed) >= 1 then 
			local castpos,HitChance, pos = TPred:GetBestCastPosition(minion, Q.Delay , Q.Width, Q.Range,Q.Speed, myHero.pos, Q.ignorecol, Q.Type )
			if self.Menu.ClearMode.UseQ:Value() and minion then           
                Control.CastSpell(HK_Q,minion.pos)
            end
        end
    
        if self:CanCast(_W) and myHero.pos:DistanceTo(minion.pos) < 800 and  minion:GetCollision(W.Width, W.Speed, W.Speed) >= 3 then
            if self.Menu.ClearMode.UseW:Value() and minion and minion.pos:DistanceTo(myHero.pos) > 500 then
                Control.CastSpell(HK_W,minion.pos)
            end
        end
        

	end
    end  
end  


function OnLoad()
	Cassiopeia()
end